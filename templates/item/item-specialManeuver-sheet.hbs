<form class="{{cssClass}} flexcol" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{item.img}}" data-action="editImage" data-field="img" title="{{item.name}}" />
    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'STREET_FIGHTER.Item.Types.specialManeuver'}}" />
      </h1>
    </div>
  </header>

  <section class="sheet-body">
    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.Common.sourceId"}}</label>
      <input type="text" name="system.sourceId" value="{{systemData.sourceId}}" placeholder="e.g., hadouken" readonly />
    </div>

    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.SpecialManeuver.category"}}</label>
      <select name="system.category">
        <option value="">-- {{localize "STREET_FIGHTER.Common.select"}} --</option>
        {{#each worldTechniques}}
        <option value="{{this.id}}" {{#if (eq this.id ../systemData.category)}}selected{{/if}}>{{this.name}}</option>
        {{/each}}
      </select>
    </div>

    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.Common.description"}}</label>
      {{#if isEditable}}<prose-mirror name="system.description" button="true" toggled="true" value="{{systemData.description}}">{{{enrichedDescription}}}</prose-mirror>{{else}}<div class="editor-content">{{{enrichedDescription}}}</div>{{/if}}
    </div>

    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.SpecialManeuver.notes"}}</label>
      <textarea name="system.notes" rows="2">{{systemData.notes}}</textarea>
    </div>

    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.SpecialManeuver.ruleSummary"}}</label>
      <input type="text" name="system.ruleSummary" value="{{systemData.ruleSummary}}" maxlength="150" />
    </div>

    <div class="form-group">
      <label>{{localize "STREET_FIGHTER.SpecialManeuver.defaultPowerPointCost"}}</label>
      <input type="number" name="system.defaultPowerPointCost" value="{{systemData.defaultPowerPointCost}}" min="-1" max="10" />
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.chiCost"}}</label>
        <input type="number" name="system.chiCost" value="{{systemData.chiCost}}" min="0" max="10" />
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.willpowerCost"}}</label>
        <input type="number" name="system.willpowerCost" value="{{systemData.willpowerCost}}" min="0" max="10" />
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.bonusPointCost"}}</label>
        <input type="number" name="system.bonusPointCost" value="{{systemData.bonusPointCost}}" min="0" max="10" />
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.Weapon.speed"}}</label>
        <input type="text" name="system.speedModifier" value="{{systemData.speedModifier}}" />
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.Weapon.damage"}}</label>
        <input type="text" name="system.damageModifier" value="{{systemData.damageModifier}}" />
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.Weapon.movement"}}</label>
        <input type="text" name="system.movementModifier" value="{{systemData.movementModifier}}" />
      </div>
    </div>

    <div class="list-section">
      <h3>{{localize "STREET_FIGHTER.SpecialManeuver.prerequisites"}}</h3>
      <ul class="entry-list">
        {{#each prerequisiteEntries}}
        <li class="entry-item">
          <span class="entry-type">{{this.type}}</span>
          <span class="entry-name">{{this.name}}</span>
          {{#if this.value}}<span class="entry-value">{{this.value}}</span>{{/if}}
          <a class="prerequisite-delete" data-index="{{@index}}" title="Delete"><i class="fas fa-trash"></i></a>
        </li>
        {{/each}}
      </ul>
      <div class="entry-add-row">
        <select name="newPrereqType">
          <option value="trait">Trait</option>
          <option value="maneuver">Maneuver</option>
        </select>
        <select name="newPrereqId">
          <option value="">-- {{localize "STREET_FIGHTER.Common.select"}} --</option>
        </select>
        <input type="number" name="newPrereqValue" value="1" min="1" max="10" style="width: 60px;" />
        <a class="prerequisite-add" title="Add"><i class="fas fa-plus"></i></a>
      </div>
    </div>

    <div class="list-section">
      <h3>{{localize "STREET_FIGHTER.SpecialManeuver.stylePowerPointCosts"}}</h3>
      <ul class="entry-list">
        {{#each styleCostEntries}}
        <li class="entry-item">
          <span class="entry-name">{{this.name}}</span>
          <span class="entry-value">{{this.cost}} PP</span>
          <a class="style-cost-delete" data-style-id="{{this.id}}" title="Delete"><i class="fas fa-trash"></i></a>
        </li>
        {{/each}}
      </ul>
      <div class="entry-add-row">
        <select name="newStyleId">
          <option value="">-- {{localize "STREET_FIGHTER.Common.select"}} --</option>
          {{#each worldStyles}}
          <option value="{{this.id}}">{{this.name}}</option>
          {{/each}}
        </select>
        <input type="number" name="newStyleCost" value="0" min="-1" max="10" style="width: 60px;" />
        <a class="style-cost-add" title="Add"><i class="fas fa-plus"></i></a>
      </div>
    </div>

    <div class="list-section">
      <h3>{{localize "STREET_FIGHTER.SpecialManeuver.backgroundPowerPointCosts"}}</h3>
      <ul class="entry-list">
        {{#each backgroundCostEntries}}
        <li class="entry-item">
          <span class="entry-name">{{this.name}}</span>
          <span class="entry-value">{{this.cost}} PP</span>
          <a class="background-cost-delete" data-background-id="{{this.id}}" title="Delete"><i class="fas fa-trash"></i></a>
        </li>
        {{/each}}
      </ul>
      <div class="entry-add-row">
        <select name="newBackgroundId">
          <option value="">-- {{localize "STREET_FIGHTER.Common.select"}} --</option>
          {{#each worldBackgrounds}}
          <option value="{{this.id}}">{{this.name}}</option>
          {{/each}}
        </select>
        <input type="number" name="newBackgroundCost" value="0" min="-1" max="10" style="width: 60px;" />
        <a class="background-cost-add" title="Add"><i class="fas fa-plus"></i></a>
      </div>
    </div>

    <details class="advanced-section">
      <summary>{{localize "STREET_FIGHTER.Tabs.details"}}</summary>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.damageTraitOverride"}}</label>
        <select name="system.damageTraitOverride">
          <option value="">-- {{localize "STREET_FIGHTER.Common.none"}} --</option>
          {{#each worldTraits}}
          <option value="{{this.id}}" {{#if (eq this.id ../systemData.damageTraitOverride)}}selected{{/if}}>{{this.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.damageAttributeOverride"}}</label>
        <select name="system.damageAttributeOverride">
          <option value="">-- {{localize "STREET_FIGHTER.Common.none"}} --</option>
          {{#each worldTraits}}
          <option value="{{this.id}}" {{#if (eq this.id ../systemData.damageAttributeOverride)}}selected{{/if}}>{{this.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.speedTraitOverride"}}</label>
        <select name="system.speedTraitOverride">
          <option value="">-- {{localize "STREET_FIGHTER.Common.none"}} --</option>
          {{#each worldTraits}}
          <option value="{{this.id}}" {{#if (eq this.id ../systemData.speedTraitOverride)}}selected{{/if}}>{{this.name}}</option>
          {{/each}}
        </select>
      </div>
      <div class="form-group">
        <label>{{localize "STREET_FIGHTER.SpecialManeuver.movementTraitOverride"}}</label>
        <select name="system.movementTraitOverride">
          <option value="">-- {{localize "STREET_FIGHTER.Common.none"}} --</option>
          {{#each worldTraits}}
          <option value="{{this.id}}" {{#if (eq this.id ../systemData.movementTraitOverride)}}selected{{/if}}>{{this.name}}</option>
          {{/each}}
        </select>
      </div>
    </details>

    <div class="effects-section">
      <h3>{{localize "STREET_FIGHTER.Tabs.effects"}}</h3>
      <ol class="items-list effects-list">
        {{#each effects}}
        <li class="item effect" data-effect-id="{{this.id}}">
          <img class="item-image" src="{{this.icon}}" />
          <span class="effect-name">{{this.name}}</span>
          <div class="item-controls">
            <a class="effect-control" data-action="effectEdit" title="Edit"><i class="fas fa-edit"></i></a>
            <a class="effect-control" data-action="effectDelete" title="Delete"><i class="fas fa-trash"></i></a>
          </div>
        </li>
        {{/each}}
      </ol>
      <a class="effect-control" data-action="effectCreate"><i class="fas fa-plus"></i> {{localize "STREET_FIGHTER.Common.create"}}</a>
    </div>
  </section>
</form>
